<script lang="ts">
	import Param from '$lib/Param.svelte';
	import { debounce } from '$lib/utils';
	import { onMount } from 'svelte';
	import { formatHex } from 'culori';

	let hue = $state({
		count: 5,
		primary: 12,
		range: 30
	});

	let chroma = $state({
		fill: 0.235,
		outline: 0.075,
		background: 0.05
	});

	let opacity = $state({
		shadow: 0.1
	});

	let lightness = $state({
		light: {
			fill: 0.6,
			outline: 0.38,
			background: 0.95
		},
		dark: {
			fill: 0.5,
			outline: 0.8,
			background: 0.3
		},
		step: 0.1
	});

	let hash = $derived(btoa(JSON.stringify({ hue, chroma, opacity, lightness })));

	onMount(() => {
		let data = JSON.parse(atob(window.location.hash.substring(1)));

		console.log(data);

		hue = data.hue;
		chroma = data.chroma;
		opacity = data.opacity;
		lightness = data.lightness;
	});

	$effect(() => {
		window.location.hash = hash;
		// fix weird issues with lightness not changing hash
		lightness.light = lightness.light;
		lightness.dark = lightness.dark;
	});

	function copyHash() {
		window.navigator.clipboard.writeText(window.location.href);
	}

	$inspect(hash);

	let palette = $derived(
		[...Array(hue.count).keys()].map(
			(index) => hue.primary + (((index * hue.range) / (hue.count - 1)) % 360)
		)
	);

	const style = $derived((mode: 'light' | 'dark') => ({
		fill: palette.map(
			(hue, index) =>
				`fill: ${formatHex(`oklch(${lightness[mode].fill + index * lightness.step} ${chroma.fill} ${hue})`)};`
		),
		outline: `fill: ${formatHex(`oklch(${lightness[mode].outline} ${chroma.outline} ${palette[0]})`)};`,
		shadow: `fill: ${formatHex(`oklch(${lightness[mode].outline} ${chroma.outline} ${palette[0]})`)}; opacity: ${opacity.shadow};`,
		background: `background-color: ${formatHex(`oklch(${lightness[mode].background} ${chroma.background} ${palette.at(-1)})`)};`
	}));

	const settings = {
		lightness: {
			min: 0,
			max: 1,
			step: 0.01
		},
		hue: {
			min: 0,
			max: 360,
			step: 1
		},
		chroma: {
			min: 0,
			max: 0.25,
			step: 0.005
		}
	};

	let svg: { light: null | SVGElement; dark: null | SVGElement } = $state({
		light: null,
		dark: null
	});

	function download(mode: 'light' | 'dark') {
		const base64doc = btoa(unescape(encodeURIComponent(svg[mode].outerHTML)));
		const a = document.createElement('a');
		const e = new MouseEvent('click');

		a.download = `niri-${mode}.svg`;
		a.href = 'data:text/html;base64,' + base64doc;
		a.dispatchEvent(e);
	}
</script>

{#snippet logo(mode: 'light' | 'dark')}
	<div style={style(mode).background + ' width: fit-content;'}>
		<svg
			bind:this={svg[mode]}
			viewBox="0 0 1000 1000"
			version="1.1"
			id="svg1"
			xmlns="http://www.w3.org/2000/svg"
		>
			<defs id="defs1">
				<clipPath clipPathUnits="userSpaceOnUse" id="clipPath26">
					<path
						id="path26"
						d="m 312.16038,545.76055 c -1.79206,-0.0132 -3.42502,0.19373 -4.84969,0.63509 -13.59866,4.21291 -4.42213,30.31531 -4.42213,48.8064 0,18.80205 14.78552,31.81101 30.50711,31.81101 17.56825,0 31.89255,-14.18672 30.50758,-31.81101 -2.24685,-28.59221 -34.41939,-49.31198 -51.74287,-49.44149 z m -198.10934,0.19431 c -1.79206,-0.0132 -3.425,0.19376 -4.84972,0.63512 -13.598602,4.21288 -4.4221,30.31531 -4.4221,48.8064 0,18.80205 14.78552,31.81101 30.50708,31.81101 17.56828,0 31.89258,-14.18672 30.50763,-31.81101 -2.24687,-28.59221 -34.41941,-49.31201 -51.74289,-49.44152 z M -8.9409863,626.68602 c -5.5625667,0 -10.0819987,1.91177 -13.5585867,5.73604 -3.476588,3.82427 -6.171096,8.86531 -8.083233,15.1232 -1.738294,6.25791 -2.955272,13.03753 -3.650589,20.33839 -0.695318,7.30086 -1.042712,14.42794 -1.042712,21.38114 0,6.9532 0.347394,14.16714 1.042712,21.64182 0.86916,7.4747 2.259822,14.42753 4.171958,20.85923 1.912137,6.43173 4.606618,11.64701 8.083233,15.6451 3.65043,3.99809 8.169862,5.99672 13.5585868,5.99672 7.3008611,0 12.3424566,-1.91176 15.123727,-5.73604 2.7812703,-3.99808 4.3456422,-8.95228 4.6933012,-14.86251 0.521501,-5.91022 0.782053,-11.90716 0.782053,-17.99123 0,-9.213 1.390662,-16.60115 4.171932,-22.16372 2.781297,-5.73638 7.127019,-8.60457 13.037245,-8.60457 6.605544,0 11.211817,2.86819 13.819245,8.60457 2.607454,5.56257 3.911274,12.95072 3.911274,22.16372 0,6.08407 0.261082,12.16785 0.782583,18.25192 0.521475,5.9102 2.172689,10.86442 4.953986,14.86251 2.955113,3.82425 7.90931,5.73654 14.862539,5.73654 6.431675,0 11.385898,-1.91229 14.862513,-5.73654 3.650404,-3.99809 6.170699,-9.21284 7.561334,-15.64457 1.564478,-6.60554 2.346637,-13.90685 2.346637,-21.90303 0.173843,-15.6447 -1.73795,-29.37721 -5.736039,-41.19763 -3.824247,-11.99427 -9.995422,-21.38106 -18.513102,-28.16045 -8.517681,-6.77936 -19.468813,-10.16918 -32.853717,-10.16918 -5.910226,0 -11.212373,1.04324 -15.90578,3.12922 -4.519591,1.91214 -7.822045,3.99814 -9.9079979,6.25791 C 7.138478,631.20543 0.96732914,626.68602 -8.9409863,626.68602 Z m 214.3331663,1.82476 c -6.60554,0 -11.73398,1.73862 -15.38441,5.2152 -3.47659,3.3028 -5.99685,7.6485 -7.56133,13.03725 -1.39064,5.38872 -2.25969,11.29879 -2.60732,17.73052 -0.17382,6.25788 -0.26069,12.42906 -0.26069,18.5131 0,9.03918 0.34742,17.81747 1.04271,26.33515 0.69535,8.51768 1.99914,16.07954 3.91128,22.68506 1.91213,6.60554 4.69348,11.90716 8.34391,15.90525 3.82425,3.82425 8.69161,5.73654 14.60183,5.73654 6.25789,0 11.03787,-1.4775 14.34064,-4.43261 3.30278,-3.12896 5.56249,-7.12726 6.77928,-11.99451 1.39064,-4.86725 2.17285,-9.90829 2.34667,-15.12317 0.34766,-5.38875 0.5219,-10.34298 0.5219,-14.86254 0,-8.6915 2.60711,-15.55802 7.82199,-20.59911 5.38872,-5.21488 11.2994,-7.82199 17.73107,-7.82199 2.43362,0 4.51912,0.34739 6.25741,1.04271 1.73832,0.69532 3.56378,1.4775 5.47589,2.34666 1.91211,0.69532 4.34553,1.04327 7.30067,1.04327 6.77936,0 11.99464,-2.25971 15.64507,-6.77931 3.82425,-4.51959 5.73604,-9.30007 5.73604,-14.34117 0,-5.91022 -1.99861,-11.21184 -5.9967,-15.90522 -3.99811,-4.69343 -8.86547,-8.34381 -14.60185,-10.95127 -5.73638,-2.78127 -11.38595,-4.17193 -16.94849,-4.17193 -6.60552,0 -13.03727,0.86903 -19.29516,2.60732 -6.08407,1.56451 -11.12511,4.17159 -15.1232,7.82202 -1.04297,-4.34575 -3.47637,-7.56136 -7.30065,-9.64731 -3.82427,-2.2598 -8.08315,-3.38991 -12.77656,-3.38991 z m -69.35857,12.51585 c -6.95321,0 -12.16798,1.99917 -15.6446,5.99726 -3.47659,3.82424 -5.82314,9.90805 -7.03996,18.25191 -1.04298,8.34384 -1.56459,19.03445 -1.56459,32.07169 0.17382,13.03725 0.7823,23.72788 1.82527,32.07169 1.21682,8.17002 3.47651,14.25436 6.77928,18.25244 3.47662,3.99809 8.69139,5.99723 15.6446,5.99723 6.9532,0 12.16795,-1.99914 15.64454,-5.99723 3.47661,-3.99808 5.8237,-10.08242 7.04052,-18.25244 1.21682,-8.34381 1.73792,-19.03444 1.56408,-32.07169 0,-13.03724 -0.60795,-23.72785 -1.82477,-32.07169 -1.21682,-8.34386 -3.5639,-14.42767 -7.04052,-18.25191 -3.30277,-3.99809 -8.43065,-5.99726 -15.38385,-5.99726 z m 197.12349,0 c -6.95323,0 -12.16798,1.99917 -15.6446,5.99726 -3.47659,3.82424 -5.82367,9.90805 -7.04049,18.25191 -1.04298,8.34384 -1.56408,19.03445 -1.56408,32.07169 0.17384,13.03725 0.78232,23.72788 1.82529,32.07169 1.2168,8.17002 3.47651,14.25436 6.77928,18.25244 3.47662,3.99809 8.69137,5.99723 15.6446,5.99723 6.95317,0 12.16795,-1.99914 15.64456,-5.99723 3.47656,-3.99808 5.82368,-10.08242 7.04047,-18.25244 1.21682,-8.34381 1.73792,-19.03444 1.56411,-32.07169 0,-13.03724 -0.60851,-23.72785 -1.8253,-32.07169 -1.21682,-8.34386 -3.5634,-14.42767 -7.03996,-18.25191 -3.30277,-3.99809 -8.43071,-5.99726 -15.38388,-5.99726 z"
					/>
				</clipPath>
			</defs>
			<path
				id="shadow"
				style={style(mode).shadow}
				d="m 758.45598,297.60557 -10e-4,10e-4 c -5.5368,-0.04 -11.2317,0.5515 -17.0787,2.3628 -14.4041,4.4624 -25.3473,17.9276 -29.0698,29.7055 -3.7226,11.7779 -3.5094,22.5114 -2.8403,33.0542 1.3384,21.0856 5.584,42.5741 5.584,56.4478 0,33.7078 18.3662,61.6405 44.0097,76.2305 -3.3172,2.3635 -6.4111,5.0559 -9.1494,8.1753 -2.325,2.5831 -4.3444,5.3319 -6.1919,8.1796 -2.0088,-3.2716 -4.2311,-6.4155 -6.7236,-9.3413 -10.0912,-11.8462 -22.698,-21.2804 -36.9419,-27.8027 -13.9738,-6.7287 -28.7955,-10.5322 -43.7314,-10.5322 -14.9849,0 -29.7514,1.9835 -44.0625,5.9297 -5.4294,1.4053 -10.6134,3.3415 -15.6475,5.5415 -2.8435,-2.5528 -5.9309,-4.788 -9.2124,-6.6211 -11.2615,-6.5702 -24.3054,-9.9361 -37.3667,-9.9361 -17.2843,0 -34.718,5.0983 -47.3203,17.086 0,0 -3e-4,0.0102 -0.0103,0.0102 -10.3623,9.847 -17.5128,22.6637 -21.5698,36.6372 l -0.1054,0.3604 -0.0938,0.3662 c -1.2759,4.9442 -2.29,10.0552 -3.1626,15.2578 -3.165,-9.181 -7.5104,-17.5658 -13.9409,-24.8057 -2.6048,-3.0952 -5.561,-5.7751 -8.7422,-8.1328 27.144,-15.2077 45.4089,-44.6544 42.7734,-78.1933 -2.8882,-36.7535 -24.2096,-66.149 -48.372,-86.3511 -24.1624,-20.2021 -50.6228,-33.0504 -77.4229,-33.2505 -5.5354,-0.04 -11.2307,0.5532 -17.0801,2.3657 -14.4042,4.4624 -25.3457,17.9277 -29.0683,29.7056 -3.7226,11.7779 -3.5095,22.5114 -2.8403,33.0542 1.3382,21.0856 5.5825,42.574 5.5825,56.4478 0,34.0648 18.7421,62.2613 44.8125,76.7182 -2.881,2.1657 -5.6075,4.5499 -8.0288,7.3081 -11.7697,13.076 -17.0339,29.6383 -19.8047,48.6372 l -0.0381,0.2534 -0.0308,0.2564 c -0.378,3.0236 -0.6709,6.317 -0.9799,9.5625 -0.6651,-2.2175 -1.3189,-4.4419 -2.0508,-6.6152 -8.6909,-27.163 -23.5594,-50.2493 -44.3482,-66.7955 -21.6332,-17.2184 -49.3834,-25.3037 -79.7343,-25.3037 -14.4392,0 -28.4058,2.6018 -41.105,8.2222 -0.3097,0.1317 -0.5935,0.2816 -0.9009,0.4146 -1.8924,-1.8977 -3.8874,-3.7008 -6.0747,-5.3028 -11.1929,-8.1973 -24.8894,-11.4697 -38.3745,-11.4697 -16.6094,0 -33.7778,7.0189 -45.0483,19.4165 -9.829096,10.8119 -16.649496,24.1513 -21.205096,39.0601 l -0.0938,0.309 -0.0893,0.3106 c -3.8339,13.8019 -6.4441,28.4806 -7.9234,44.0141 -1.4277,14.9897 -2.146,29.6849 -2.146,44.083 0,14.3988 0.7201,29.2446 2.1431,44.5401 l 0.0249,0.2886 0.0337,0.2871 c 1.8439,15.858 4.8191,30.8488 9.0102,44.9458 4.51,15.1693 11.2298,28.7323 20.893096,39.8452 l 0.2007,0.2314 0.2051,0.2241 c 11.2736,12.3473 28.2837,19.8838 45.0102,19.8838 18.6285,0 38.249,-5.6169 49.8296,-21.5405 l 0.1567,-0.2124 0.1495,-0.2168 c 8.4368,-12.1279 12.6922,-26.6694 13.5981,-41.7422 1.0483,-12.0845 1.5835,-24.3156 1.5835,-36.6943 0,-15.4391 2.5413,-26.1004 5.4829,-31.9834 l 0.0689,-0.1377 0.0659,-0.1377 c 2.3749,-4.8983 -0.5871,-2.6104 2.8066,-2.6104 5.6058,0 2.29,-1.8618 4.0664,2.0464 l 0.0601,0.1319 0.063,0.1333 c 2.8214,6.0191 5.2514,16.9604 5.2514,32.5576 0,12.5859 0.5395,25.1707 1.6172,37.7461 v 0.0322 0.0308 c 1.3175,14.9302 5.7475,29.1731 14.0684,41.1342 l 0.3589,0.5171 0.3852,0.4981 c 11.5969,15.0078 30.709,20.9575 48.8804,20.9575 17.5158,0 35.5934,-6.2437 47.5649,-19.3931 9.4508,-10.3557 15.6819,-23.219 19.3887,-37.2011 3.0946,13.5571 7.9984,25.6047 16.3945,35.7685 l 0.2007,0.2432 0.2095,0.2402 c 12.2262,14.0602 31.1062,20.3423 49.4868,20.3423 18.3805,0 37.258,-6.2823 49.4839,-20.3423 11.0103,-12.6617 16.3931,-28.5483 19.2729,-46.5644 0.5537,2.1895 1.0685,4.4167 1.6846,6.5449 4.541,15.6871 11.5628,29.7089 21.8569,40.9834 l 0.3853,0.4219 0.4028,0.4042 c 12.0376,12.0374 29.3076,18.5523 46.2583,18.5523 16.1629,0 32.4121,-4.0269 44.7334,-15.0513 l 0.2666,-0.2373 0.2593,-0.2461 c 10.0026,-9.476 16.884,-21.9842 20.2646,-35.3701 3.1457,-11.2032 4.9295,-22.7865 5.3496,-34.5879 0.6876,-10.783 1.0547,-20.8457 1.0547,-30.1728 0,-11.9243 2.6089,-17.2872 7.5879,-22.1001 h 0.0103 v -0.0103 c 6.9172,-6.6942 11.3486,-8.1811 17.0991,-8.1811 2.3538,0 3.2335,0.3825 2.8667,0.2358 2.9904,1.1962 6.2,2.5703 9.6138,4.1221 l 0.8921,0.4043 0.9199,0.3354 c 7.6367,2.7774 15.0952,3.5493 22.8325,3.5493 13.8631,0 28.0043,-4.2881 39.2593,-12.4248 -0.087,4.9907 -0.3223,9.3889 -0.3223,14.7452 v 0.1669 0.167 c 0.3471,26.0267 1.5401,47.6328 3.7529,65.335 l 0.0367,0.293 0.0424,0.2929 c 2.7734,18.6219 7.8755,34.7968 18.7076,47.9092 l 0.2006,0.2432 0.2095,0.2402 c 12.2261,14.0601 31.1062,20.3423 49.4868,20.3423 18.3804,0 37.2577,-6.2822 49.4839,-20.3423 11.3915,-13.1003 16.8281,-29.5974 19.6274,-48.3926 l 0.0103,-0.0366 v -0.0395 c 2.6614,-18.2511 3.6552,-40.1403 3.312,-66.3399 -0.01,-26.1361 -1.1829,-47.935 -3.8203,-66.0205 -2.7481,-18.8436 -7.966,-35.2821 -19.5337,-48.3076 -2.4761,-2.9426 -5.2846,-5.4898 -8.2851,-7.7651 27.9359,-14.9619 46.9173,-44.8128 44.2353,-78.9419 -2.8881,-36.7534 -24.2082,-66.149 -48.3706,-86.3511 -24.1624,-20.2021 -50.6257,-33.0502 -77.4258,-33.2505 z m -20.5312,295.9116 -0.3677,0.4409 c 0.052,-0.062 0.091,-0.1356 0.1436,-0.1977 0.07,-0.086 0.1544,-0.1568 0.2241,-0.2432 z m -388.103,98.3467 -0.1084,0.4805 c 0.026,-0.1107 0.0428,-0.2261 0.0688,-0.3369 0.011,-0.049 0.0296,-0.095 0.0396,-0.1436 z"
			/>
			<path
				id="outline"
				style={style(mode).outline}
				d="M 777.95356 284.10789 C 772.41728 284.06829 766.72245 284.65922 760.87495 286.47068 C 746.47088 290.93314 735.52922 304.39976 731.80659 316.17771 C 728.08396 327.95567 728.29711 338.68909 728.96626 349.23191 C 730.30456 370.31755 734.54878 391.80456 734.54878 405.67819 C 734.54878 439.38603 752.91498 467.32008 778.55854 481.91012 C 775.23836 484.27584 772.14048 486.97259 769.40034 490.09567 C 767.07946 492.67525 765.06204 495.42026 763.21723 498.26364 C 761.20879 494.99283 758.98839 491.84895 756.49653 488.92379 C 746.40533 477.07754 733.79441 467.64335 719.55024 461.12106 C 705.57626 454.39213 690.75597 450.5903 675.82026 450.5903 C 660.83523 450.5903 646.06892 452.57368 631.75777 456.51999 C 626.32803 457.92537 621.14328 459.85985 616.10884 462.06003 C 613.26551 459.50728 610.1792 457.272 606.89791 455.43893 C 595.63632 448.86872 582.59388 445.50436 569.53267 445.50436 C 552.24837 445.50436 534.8132 450.59922 522.2109 462.58737 C 522.2089 462.58937 522.20704 462.59416 522.20504 462.59616 C 511.84282 472.44291 504.69212 485.26037 500.63522 499.23483 L 500.52975 499.59518 L 500.436 499.96139 C 499.15995 504.90597 498.14604 510.01617 497.2734 515.2192 C 494.11026 506.04321 489.76887 497.66252 483.3442 490.42526 C 480.73638 487.32437 477.77628 484.64043 474.5903 482.27926 C 501.73492 467.07176 519.99932 437.62679 517.36373 404.08737 C 514.4756 367.33389 493.15701 337.93838 468.9946 317.73631 C 444.83219 297.53424 418.36884 284.6861 391.56882 284.48582 L 391.56443 284.48582 L 391.56003 284.48582 C 386.02415 284.44622 380.32882 285.03929 374.47995 286.85154 C 360.077 291.31468 349.13398 304.77985 345.4116 316.55711 C 341.68901 328.33504 341.90211 339.06848 342.57126 349.6113 C 343.90954 370.69693 348.15525 392.18244 348.15525 406.05612 C 348.15525 440.12097 366.89585 468.3204 392.96628 482.77731 C 390.08262 484.94518 387.35162 487.33415 384.92868 490.09567 C 373.1659 503.16976 367.90272 519.72824 365.13279 538.72262 L 365.0947 538.97604 L 365.06394 539.23238 C 364.68599 542.25605 364.39296 545.54938 364.08396 548.79488 C 363.41893 546.5774 362.76507 544.35288 362.03318 542.17965 C 353.34223 515.01633 338.47379 491.93025 317.68504 475.38424 C 296.05186 458.16598 268.30155 450.08053 237.95067 450.08053 C 223.51179 450.08053 209.54507 452.68064 196.84569 458.30124 C 196.53594 458.43298 196.2522 458.58133 195.94481 458.71432 C 194.05298 456.81737 192.05816 455.01298 189.87157 453.41159 C 178.67868 445.21423 164.98069 441.94333 151.49559 441.94333 C 134.88583 441.94333 117.71903 448.96427 106.44872 461.3613 C 96.619883 472.17306 89.797818 485.51253 85.242181 500.42135 L 85.148431 500.73043 L 85.062006 501.03952 C 81.228227 514.84119 78.617994 529.51867 77.138666 545.05221 C 75.710974 560.04246 74.989741 574.73941 74.989741 589.13814 C 74.989741 603.53706 75.709949 618.38283 77.132807 633.67818 L 77.160639 633.96675 L 77.192866 634.25386 C 79.036844 650.11193 82.013552 665.09994 86.204584 679.19673 L 86.203119 679.19673 C 90.713015 694.36697 97.431076 707.93157 107.09472 719.04487 L 107.29687 719.27485 L 107.50195 719.50044 C 118.77538 731.84724 135.7868 739.38569 152.51366 739.38569 C 171.14229 739.38569 190.76277 733.76613 202.34325 717.84223 L 202.49706 717.62983 L 202.64793 717.4145 C 211.08516 705.28637 215.34031 690.74514 216.24608 675.67232 C 217.29454 663.58761 217.82957 651.35666 217.82957 638.97798 C 217.82957 623.53877 220.37101 612.8745 223.31248 606.99166 L 223.38133 606.85543 L 223.44871 606.7192 C 225.82359 601.82107 222.86018 604.10738 226.25389 604.10738 C 231.85937 604.10738 228.54406 602.2445 230.3203 606.1523 L 230.38035 606.28707 L 230.44334 606.42037 C 233.26483 612.4395 235.69481 623.38085 235.69481 638.97798 C 235.69481 651.56373 236.23432 664.14721 237.31199 676.72261 L 237.31639 676.75337 L 237.31785 676.78706 C 238.63534 691.71737 243.06512 705.96017 251.38621 717.92134 L 251.74656 718.43696 L 252.13035 718.93501 C 263.72704 733.94274 282.84097 739.89399 301.01219 739.89399 C 318.52773 739.89399 336.60405 733.65183 348.57566 720.50239 C 358.026 710.14734 364.25738 697.28368 367.96433 683.30269 C 371.05889 696.85898 375.96284 708.90479 384.35886 719.06831 L 384.56247 719.31294 L 384.76902 719.55317 C 396.99514 733.61315 415.87537 739.89399 434.25583 739.89399 C 452.63616 739.89399 471.51339 733.61359 483.73971 719.55317 C 494.74983 706.89139 500.13429 691.00452 503.01412 672.98872 C 503.56773 675.17786 504.08128 677.40583 504.69723 679.53364 C 509.23824 695.2207 516.26025 709.2411 526.55416 720.51557 L 526.93942 720.93745 L 527.34371 721.34175 C 539.38144 733.37963 556.6515 739.89399 573.60201 739.89399 C 589.76454 739.89399 606.01247 735.86846 618.33394 724.84419 L 618.60201 724.60542 L 618.86128 724.35932 C 628.86409 714.88278 635.74707 702.37484 639.1274 688.98774 C 642.26678 677.80686 644.048 666.24694 644.47261 654.47017 C 645.16303 643.65991 645.52876 633.57702 645.52876 624.22847 C 645.52876 612.30435 648.13764 606.94144 653.11665 602.12838 L 653.12251 602.12252 L 653.12691 602.11959 C 660.04462 595.42513 664.47732 593.93697 670.22749 593.93697 C 672.58123 593.93697 673.46115 594.32046 673.09566 594.17427 C 676.08422 595.36977 679.29521 596.74299 682.70942 598.29488 L 683.60005 598.69918 L 684.51997 599.03463 C 692.15606 601.8115 699.61532 602.58248 707.35249 602.58248 C 721.2154 602.58248 735.35665 598.2973 746.61176 590.1606 C 746.52476 595.15123 746.2895 599.54802 746.2895 604.90425 L 746.2895 605.06978 L 746.29096 605.23824 C 746.63784 631.26517 747.83101 652.87232 750.04389 670.57466 L 750.08051 670.86763 L 750.12299 671.1606 C 752.89645 689.78207 757.99851 705.9558 768.83051 719.06831 L 769.03413 719.31294 L 769.24067 719.55317 C 781.46684 733.6134 800.34703 739.89399 818.72748 739.89399 C 837.10794 739.89399 855.98528 733.61331 868.21136 719.55317 C 879.60309 706.45271 885.03959 689.95569 887.8388 671.1606 L 887.84466 671.12251 L 887.85052 671.08443 C 890.5124 652.83263 891.50428 630.94416 891.16107 604.74459 C 891.15607 578.60859 889.97825 556.80819 887.34076 538.72262 C 884.59359 519.88425 879.37511 503.45188 867.81439 490.42819 C 865.33591 487.48096 862.52621 484.92812 859.52191 482.64987 C 887.4579 467.68798 906.44063 437.83855 903.75873 403.70944 C 900.87053 366.95611 879.54908 337.55897 855.38666 317.35691 C 831.22424 297.15485 804.76096 284.30825 777.96088 284.10789 L 777.95795 284.10789 L 777.95356 284.10789 z M 757.42377 580.0151 L 757.05903 580.45894 C 757.11623 580.39134 757.15735 580.31141 757.2143 580.24361 C 757.2799 580.16341 757.35866 580.09571 757.42377 580.0151 z M 506.68942 604.56881 L 506.69088 604.90425 C 506.69088 604.84855 506.68942 604.80022 506.68942 604.74459 C 506.68862 604.68359 506.69024 604.62989 506.68942 604.56881 z M 374.46677 630.33248 L 374.46531 630.6108 C 374.46571 630.5748 374.46238 630.5413 374.46238 630.50533 C 374.46242 630.44653 374.46677 630.39132 374.46677 630.33248 z M 369.32224 678.3647 L 369.21238 678.84517 C 369.23648 678.7435 369.25146 678.63638 369.27536 678.53462 C 369.28796 678.47672 369.30964 678.42268 369.32224 678.3647 z "
			/>
			<g
				id="g6-6"
				transform="matrix(1.9504056,0,0,1.9504056,179.4315,-767.2066)"
				clip-path="url(#clipPath26)"
				style="display:inline"
			>
				<circle
					style={style(mode).fill[4]}
					id="path1-19-4-2-3"
					cx="40.500969"
					cy="658.85663"
					r="120.95444"
					clip-path="none"
				/>
				<circle
					style={style(mode).fill[3]}
					id="path1-19-4-2-7-20"
					cx="129.86697"
					cy="658.85675"
					r="120.95444"
					clip-path="none"
				/>
				<circle
					style={style(mode).fill[2]}
					id="path1-19-4-2-7-6-6"
					cx="219.23291"
					cy="658.85675"
					r="120.95444"
					clip-path="none"
				/>
				<circle
					style={style(mode).fill[1]}
					id="path1-19-4-2-7-61-1"
					cx="308.59891"
					cy="658.85663"
					r="120.95444"
					clip-path="none"
				/>
				<circle
					style={style(mode).fill[0]}
					id="path1-19-4-2-7-2-5"
					cx="397.96487"
					cy="658.85675"
					r="120.95444"
					clip-path="none"
				/>
			</g>
		</svg>
	</div>
{/snippet}

{#snippet controls(mode: 'light' | 'dark')}
	<h2>lightness</h2>
	<Param bind:value={lightness[mode].fill} label="fill" {...settings.lightness} />
	<Param bind:value={lightness[mode].outline} label="outline" {...settings.lightness} />
	<Param bind:value={lightness[mode].background} label="background" {...settings.lightness} />
	<button onclick={() => download(mode)} style="float: right; margin-top: 1rem">download svg</button
	>
{/snippet}

<main>
	<div>
		<h1>global</h1>
		<h2>hue</h2>
		<Param bind:value={hue.primary} label="primary" {...settings.hue} />
		<Param bind:value={hue.range} label="range" {...settings.hue} />
		<h2>chroma</h2>
		<Param bind:value={chroma.fill} label="fill" {...settings.chroma} />
		<Param bind:value={chroma.outline} label="outline" {...settings.chroma} />
		<Param bind:value={chroma.background} label="background" {...settings.chroma} />
		<h2>other</h2>
		<Param bind:value={opacity.shadow} label="shadow opacity" min={0} max={1} step={0.001} />
		<Param
			bind:value={lightness.step}
			label="lightness gradient"
			min={0.05}
			max={0.15}
			step={0.001}
		/>
		<h1>sharing</h1>
		<button
			onclick={() => {
				copyHash();
			}}>copy design url</button
		>
	</div>
	<div>
		<h1>light mode</h1>
		{@render logo('light')}
		{@render controls('light')}
	</div>
	<div>
		<h1>dark mode</h1>
		{@render logo('dark')}
		{@render controls('dark')}
	</div>
</main>

<style>
	svg {
		width: 400px;
		display: flex;
		flex-flow: column;
		align-items: stretch;
		margin: 1rem 0;
	}

	main {
		display: flex;
		flex-flow: row nowrap;
		justify-content: space-around;
		align-items: center;
		margin: auto;

		div {
			width: 400px;
		}
	}

	h1 {
		font-size: 1.3rem;
	}

	h2 {
		font-size: 1.1rem;
	}

	@media (max-width: 1400px) {
		main {
			flex-flow: column;
		}
	}
</style>
